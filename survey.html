<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>B3TRSURV - Survey</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <h1>B3TRSURV Community Survey</h1>
    <form id="survey-form">

      <label>1. Age Range:</label><br/>
      <select name="age">
        <option value="">--Select--</option>
        <option value="Under 18">Under 18</option>
        <option value="18-25">18–25</option>
        <option value="26-35">26–35</option>
        <option value="36-50">36–50</option>
        <option value="51+">51+</option>
      </select><br/><br/>

      <label>2. Highest Education Level:</label><br/>
      <select name="education">
        <option value="">--Select--</option>
        <option value="No High School">No High School</option>
        <option value="High School Diploma">High School Diploma</option>
        <option value="Some College">Some College</option>
        <option value="Bachelor's">Bachelor's Degree</option>
        <option value="Postgrad">Postgraduate Degree</option>
      </select><br/><br/>

      <label>3. Annual Income Level:</label><br/>
      <select name="income">
        <option value="">--Select--</option>
        <option value="Under $10,000">Under $10,000</option>
        <option value="$10,000–$30,000">$10,000–$30,000</option>
        <option value="$30,000–$60,000">$30,000–$60,000</option>
        <option value="$60,000+">$60,000+</option>
      </select><br/><br/>

      <label>4. Do you trust mainstream media?</label><br/>
      <label><input type="radio" name="mediaTrust" value="Yes" /> Yes</label><br/>
      <label><input type="radio" name="mediaTrust" value="No" /> No</label><br/>
      <label><input type="radio" name="mediaTrust" value="Sometimes" /> Sometimes</label><br/><br/>

      <label>5. Algorand Wallet Address (optional for rewards):</label><br/>
      <input type="text" name="wallet" placeholder="Enter wallet address"/><br/><br/>

      <button type="submit" class="button">Submit Survey</button>
    </form>

    <p id="response-message" style="margin-top: 1.5em;"></p>
    <p><a href="index.html">← Back to Home</a></p>
  </div>

  <script>
    document.getElementById("survey-form").addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(e.target);
      const data = {};
      formData.forEach((value, key) => data[key] = value);

      const res = await fetch("/submit", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const result = await res.json();
      document.getElementById("response-message").textContent = result.message || "Survey submitted!";
      e.target.reset();
    });
  </script>
</body>
</html>
